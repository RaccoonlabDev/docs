<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4. RaccoonLab CAN-Sniffer usage</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.39eec17d.js" as="script"><link rel="preload" href="/assets/js/2.e4757d80.js" as="script"><link rel="preload" href="/assets/js/1.6b7e298e.js" as="script"><link rel="preload" href="/assets/js/62.81a4b651.js" as="script"><link rel="prefetch" href="/assets/js/10.cfef0e28.js"><link rel="prefetch" href="/assets/js/100.3b273e3f.js"><link rel="prefetch" href="/assets/js/101.77a43c0f.js"><link rel="prefetch" href="/assets/js/102.97a6bddd.js"><link rel="prefetch" href="/assets/js/103.64f2d309.js"><link rel="prefetch" href="/assets/js/104.5faa21fe.js"><link rel="prefetch" href="/assets/js/105.a372c023.js"><link rel="prefetch" href="/assets/js/106.4fc3d680.js"><link rel="prefetch" href="/assets/js/107.780c3c24.js"><link rel="prefetch" href="/assets/js/108.128d3bef.js"><link rel="prefetch" href="/assets/js/109.2d4772e9.js"><link rel="prefetch" href="/assets/js/11.4930f11f.js"><link rel="prefetch" href="/assets/js/110.a7d00aa7.js"><link rel="prefetch" href="/assets/js/111.d5a53033.js"><link rel="prefetch" href="/assets/js/112.8b669a37.js"><link rel="prefetch" href="/assets/js/113.fffeb95d.js"><link rel="prefetch" href="/assets/js/114.1aade20c.js"><link rel="prefetch" href="/assets/js/12.4775f728.js"><link rel="prefetch" href="/assets/js/13.f6050169.js"><link rel="prefetch" href="/assets/js/14.2a25d684.js"><link rel="prefetch" href="/assets/js/15.ced5cae7.js"><link rel="prefetch" href="/assets/js/16.947b104c.js"><link rel="prefetch" href="/assets/js/17.c0040ac1.js"><link rel="prefetch" href="/assets/js/18.3ee74814.js"><link rel="prefetch" href="/assets/js/19.47358fba.js"><link rel="prefetch" href="/assets/js/20.06fb7faf.js"><link rel="prefetch" href="/assets/js/21.42c93850.js"><link rel="prefetch" href="/assets/js/22.41331f45.js"><link rel="prefetch" href="/assets/js/23.026c5405.js"><link rel="prefetch" href="/assets/js/24.e6c11aa6.js"><link rel="prefetch" href="/assets/js/25.d6854027.js"><link rel="prefetch" href="/assets/js/26.c9a1af31.js"><link rel="prefetch" href="/assets/js/27.c6ed4ffa.js"><link rel="prefetch" href="/assets/js/28.7faa204c.js"><link rel="prefetch" href="/assets/js/29.03b506e9.js"><link rel="prefetch" href="/assets/js/3.7e8ca87f.js"><link rel="prefetch" href="/assets/js/30.6ec38b6a.js"><link rel="prefetch" href="/assets/js/31.9931d118.js"><link rel="prefetch" href="/assets/js/32.31ed799b.js"><link rel="prefetch" href="/assets/js/33.79ffe174.js"><link rel="prefetch" href="/assets/js/34.ce2f90ef.js"><link rel="prefetch" href="/assets/js/35.30d0ff88.js"><link rel="prefetch" href="/assets/js/36.b4366c7d.js"><link rel="prefetch" href="/assets/js/37.83820ac9.js"><link rel="prefetch" href="/assets/js/38.1ac6e57e.js"><link rel="prefetch" href="/assets/js/39.3bd3eec4.js"><link rel="prefetch" href="/assets/js/4.2cd4abd0.js"><link rel="prefetch" href="/assets/js/40.94b0ae43.js"><link rel="prefetch" href="/assets/js/41.12b429e8.js"><link rel="prefetch" href="/assets/js/42.f3a6a064.js"><link rel="prefetch" href="/assets/js/43.22ee3cdd.js"><link rel="prefetch" href="/assets/js/44.0b198785.js"><link rel="prefetch" href="/assets/js/45.bd8858e9.js"><link rel="prefetch" href="/assets/js/46.ee71dfb5.js"><link rel="prefetch" href="/assets/js/47.7e97349e.js"><link rel="prefetch" href="/assets/js/48.34ba2a7c.js"><link rel="prefetch" href="/assets/js/49.13f4e6ce.js"><link rel="prefetch" href="/assets/js/5.1ca2eae3.js"><link rel="prefetch" href="/assets/js/50.8193e7c4.js"><link rel="prefetch" href="/assets/js/51.b4eb5c55.js"><link rel="prefetch" href="/assets/js/52.e8db082d.js"><link rel="prefetch" href="/assets/js/53.24beb211.js"><link rel="prefetch" href="/assets/js/54.b57287d0.js"><link rel="prefetch" href="/assets/js/55.1c642633.js"><link rel="prefetch" href="/assets/js/56.08a80eee.js"><link rel="prefetch" href="/assets/js/57.39a7c99e.js"><link rel="prefetch" href="/assets/js/58.8e9ce24f.js"><link rel="prefetch" href="/assets/js/59.410fdad7.js"><link rel="prefetch" href="/assets/js/6.a9106c43.js"><link rel="prefetch" href="/assets/js/60.5689ac92.js"><link rel="prefetch" href="/assets/js/61.f9a686f4.js"><link rel="prefetch" href="/assets/js/63.e9a54cf2.js"><link rel="prefetch" href="/assets/js/64.75259170.js"><link rel="prefetch" href="/assets/js/65.9d1b5b8e.js"><link rel="prefetch" href="/assets/js/66.14a1f06a.js"><link rel="prefetch" href="/assets/js/67.1c5bde66.js"><link rel="prefetch" href="/assets/js/68.370d1cf6.js"><link rel="prefetch" href="/assets/js/69.ea0816b9.js"><link rel="prefetch" href="/assets/js/7.a6f2f23d.js"><link rel="prefetch" href="/assets/js/70.b9f20f40.js"><link rel="prefetch" href="/assets/js/71.0a9b6323.js"><link rel="prefetch" href="/assets/js/72.e83e6631.js"><link rel="prefetch" href="/assets/js/73.7f0c5662.js"><link rel="prefetch" href="/assets/js/74.e9a04fe4.js"><link rel="prefetch" href="/assets/js/75.7deaa181.js"><link rel="prefetch" href="/assets/js/76.79ebd324.js"><link rel="prefetch" href="/assets/js/77.18503f04.js"><link rel="prefetch" href="/assets/js/78.b8ec01d2.js"><link rel="prefetch" href="/assets/js/79.3d6f56d3.js"><link rel="prefetch" href="/assets/js/80.af990966.js"><link rel="prefetch" href="/assets/js/81.29636f5d.js"><link rel="prefetch" href="/assets/js/82.8fec3ee8.js"><link rel="prefetch" href="/assets/js/83.b1eec64c.js"><link rel="prefetch" href="/assets/js/84.7313b517.js"><link rel="prefetch" href="/assets/js/85.0f1a3b42.js"><link rel="prefetch" href="/assets/js/86.de0619d1.js"><link rel="prefetch" href="/assets/js/87.cd841f29.js"><link rel="prefetch" href="/assets/js/88.c41b511d.js"><link rel="prefetch" href="/assets/js/89.bdf167aa.js"><link rel="prefetch" href="/assets/js/90.802d36fa.js"><link rel="prefetch" href="/assets/js/91.9c107ae4.js"><link rel="prefetch" href="/assets/js/92.3d389cfa.js"><link rel="prefetch" href="/assets/js/93.086a16b8.js"><link rel="prefetch" href="/assets/js/94.bcee39cf.js"><link rel="prefetch" href="/assets/js/95.bbe11551.js"><link rel="prefetch" href="/assets/js/96.5f97ac54.js"><link rel="prefetch" href="/assets/js/97.cadb0e64.js"><link rel="prefetch" href="/assets/js/98.52ca6348.js"><link rel="prefetch" href="/assets/js/99.114fca42.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1faf9b75.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/RaccoonlabDev/docs/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Binaries
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://raccoonlab.co" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Raccoonlab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://raccoonlab.co/store" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Store
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/RaccoonlabDev/docs/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Have a question?
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/RaccoonlabDev/docs/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Binaries
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://raccoonlab.co" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Raccoonlab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://raccoonlab.co/store" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Store
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/RaccoonlabDev/docs/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Have a question?
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/guide/" class="sidebar-heading clickable router-link-active"><span>Introduction</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/programmer_sniffer/" class="sidebar-heading clickable router-link-active open"><span>Programmer-sniffer</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/programmer_sniffer/" aria-current="page" class="sidebar-link">1. General</a></li><li><a href="/guide/programmer_sniffer/hardware.html" class="sidebar-link">2. Hardware</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/programmer_sniffer/programmer.html" class="sidebar-link">3. Programmer usage</a></li><li><a href="/guide/programmer_sniffer/sniffer.html" aria-current="page" class="active sidebar-link">4. Sniffer usage</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/programmer_sniffer/shipping.html" class="sidebar-link">5. Shipping</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/can_pwm" class="sidebar-heading clickable"><span>Mini/Micro nodes</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/gps_mag_baro/" class="sidebar-heading clickable"><span>GNSS Mag Baro</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/rangefinder/" class="sidebar-heading clickable"><span>Rangefinder</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/airspeed" class="sidebar-heading clickable"><span>Airspeed</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/power/" class="sidebar-heading clickable"><span>Current sensor</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/ui_leds/" class="sidebar-heading clickable"><span>UAV LIGHTS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/pmu/ice/" class="sidebar-heading clickable"><span>ICE Controller</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/pmu/" class="sidebar-heading clickable"><span>Power &amp; Connectivity</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/autopilot/" class="sidebar-heading clickable"><span>Autopilot</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/guide/wifi_bridge/" class="sidebar-heading clickable"><span>Other devices</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_4-raccoonlab-can-sniffer-usage"><a href="#_4-raccoonlab-can-sniffer-usage" class="header-anchor">#</a> 4. RaccoonLab CAN-Sniffer usage</h1> <p>Here is a comprehensive guide on how to use the RaccoonLab CAN-sniffer with different levels of applications. It starts from very basics and goes to the highest level of usage. Each section is independent, so you can skip what you don't need.</p> <p>The guide is suitable for Linux and Windows (MacOS in process).</p> <h3 id="_4-1-connection-example-diagram"><a href="#_4-1-connection-example-diagram" class="header-anchor">#</a> 4.1. Connection example diagram</h3> <p>You have 2 options on how to connect a CAN-node to the RaccoonLab sniffer: UCANPHY Micro (JST-GH 4) and 6-pin Molex.</p> <p>UCANPHY Micro is recommended for bench testing with low-power devices such as Mini v2 node without a load, airspeed, gnss, etc. This connection is simple and it delivers power to the device, so you don't need to use an external power source. An example of such connection is shown below:</p> <p><img src="/assets/img/connection-sniffer.c1af39a6.png" alt="connection-sniffer" title="connection-sniffer"></p> <p>Alternativelly, you can use 6-pin Molex. It doesn't deliver power from RaccoonLab sniffer (=PC) to the device. Please, check the hardware page for details.</p> <h3 id="_4-2-low-level-pyserial"><a href="#_4-2-low-level-pyserial" class="header-anchor">#</a> 4.2. Low level - pyserial</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Normally you don't need to use CAN-sniffer with pyserial. The following instructions may only be useful for low-level development or debugging. For details, please check <a href="https://pyserial.readthedocs.io/en/latest/pyserial.html" target="_blank" rel="noopener noreferrer">pySerial docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <p>RaccoonLab CAN-Sniffer is a USB-CAN adapter, so you can interact with it via serial port.</p> <p>At the beginning the RaccoonLab CAN-sniffer sends nothing. You have to initialize it with a sequence of commands: set speed and open channel.</p> <p>Then you can send or receive CAN frames. The CAN-frame format is the following:</p> <table><thead><tr><th></th> <th>Start byte</th> <th>ID</th> <th>Size</th> <th>Payload</th> <th>End byte</th></tr></thead> <tbody><tr><td></td> <td>1</td> <td>8</td> <td>1</td> <td>0-8</td> <td>1</td></tr> <tr><td></td> <td>'T'</td> <td></td> <td></td> <td></td> <td>'\r'</td></tr></tbody></table> <p>Example of CAN-frame: &quot;T107D5614806000000010255BD\r&quot;</p> <p>In the end it is expected to close the device by sending a specific command.</p> <p>An example of code for Linux from <a href="https://github.com/PonomarevDA/tools/blob/main/nodes/sniffer/pyserial.py" target="_blank" rel="noopener noreferrer">tools/nodes/sniffer/pyserial.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is shown below (for Windows you just need to change <code>/dev/ttyACM0</code> to <code>COM4</code> or similar):</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python3</span>
<span class="token keyword">import</span> serial

CMD_EMPTY <span class="token operator">=</span> <span class="token string">b'\r'</span>
CMD_CLOSE_CHANNEL <span class="token operator">=</span> <span class="token string">b'C\r'</span>
CMD_SET_SPEED <span class="token operator">=</span> <span class="token string">b'S8\r'</span>
CMD_OPEN_CHANNEL <span class="token operator">=</span> <span class="token string">b'O\r'</span>
CMD_CLEAR_ERROR_FLAGS <span class="token operator">=</span> <span class="token string">b'F\r'</span>

<span class="token keyword">with</span> serial<span class="token punctuation">.</span>Serial<span class="token punctuation">(</span><span class="token string">&quot;/dev/ttyACM0&quot;</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ser<span class="token punctuation">:</span>
    commands <span class="token operator">=</span> <span class="token punctuation">[</span>CMD_EMPTY<span class="token punctuation">,</span>
                CMD_CLOSE_CHANNEL<span class="token punctuation">,</span>
                CMD_SET_SPEED<span class="token punctuation">,</span>
                CMD_OPEN_CHANNEL<span class="token punctuation">,</span>
                CMD_CLEAR_ERROR_FLAGS<span class="token punctuation">]</span>
    <span class="token keyword">for</span> cmd <span class="token keyword">in</span> commands<span class="token punctuation">:</span>
        <span class="token comment"># Skip wait for ACK part here for simplicity </span>
        ser<span class="token punctuation">.</span>write<span class="token punctuation">(</span>cmd<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Send </span><span class="token interpolation"><span class="token punctuation">{</span>cmd<span class="token punctuation">}</span></span><span class="token string">, recv: </span><span class="token interpolation"><span class="token punctuation">{</span>ser<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

    can_frame <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        byte <span class="token operator">=</span> ser<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        can_frame <span class="token operator">+=</span> byte<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\r'</span><span class="token punctuation">,</span> <span class="token string">'\\r'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> byte <span class="token operator">==</span> <span class="token string">b'\r'</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> can_frame<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'T'</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;recv CAN-frame: </span><span class="token interpolation"><span class="token punctuation">{</span>can_frame<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            can_frame <span class="token operator">=</span> <span class="token string">''</span>

    ser<span class="token punctuation">.</span>write<span class="token punctuation">(</span>CMD_CLOSE_CHANNEL<span class="token punctuation">)</span>
</code></pre></div><p>The script opens a channel, receives and prints a few CAN frames, then closes the channel and exits.</p> <h3 id="_4-3-middle-level-pythoncan"><a href="#_4-3-middle-level-pythoncan" class="header-anchor">#</a> 4.3. Middle level - PythonCAN</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The notes below can be useful for raw CAN-bus debugging or when you use a device for custom CAN-protocol. If you are going to use RaccoonLab CAN-sniffer with Cyphal or DroneCAN, most probably you can skip this section as well and go to the next ones. For details, please check <a href="https://python-can.readthedocs.io/en/stable/index.html" target="_blank" rel="noopener noreferrer">python-can docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <p>The <a href="https://python-can.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">python-can<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library provides CAN support for Python. It supports different hardware devices.</p> <ul><li>With RacconLab CAN-sniffer we recommend using <a href="https://python-can.readthedocs.io/en/stable/interfaces/slcan.html" target="_blank" rel="noopener noreferrer">slcan ASCII protocol (CAN over Serial / SLCAN)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Since it directly uses a serial port, the interface works on both Linux and Windows. The disadvantage, though, is that this interface only support using a single process for the serial port.</li> <li>For Ubuntu users, <a href="https://python-can.readthedocs.io/en/stable/interfaces/socketcan.html" target="_blank" rel="noopener noreferrer">SocketCAN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be a better alternative because it allows running multiple processes for a single interface. For example, you can run a few nodes, Yakut and Yukon simultaneously.</li></ul> <p>An example of code for Linux from <a href="https://github.com/PonomarevDA/tools/blob/main/nodes/sniffer/python_can_slcan.py" target="_blank" rel="noopener noreferrer">tools/nodes/sniffer/python_can_slcan.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is shown below:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> can
<span class="token keyword">with</span> can<span class="token punctuation">.</span>Bus<span class="token punctuation">(</span>interface<span class="token operator">=</span><span class="token string">'slcan'</span><span class="token punctuation">,</span> channel<span class="token operator">=</span><span class="token string">'/dev/ttyACM0'</span><span class="token punctuation">,</span> ttyBaudrate<span class="token operator">=</span><span class="token number">1000000</span><span class="token punctuation">,</span> bitrate<span class="token operator">=</span><span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token keyword">as</span> bus<span class="token punctuation">:</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        msg <span class="token operator">=</span> bus<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
</code></pre></div><p>The script simply receives and prints a few CAN frames.</p> <h3 id="_4-4-high-level-cyphal"><a href="#_4-4-high-level-cyphal" class="header-anchor">#</a> 4.4 High level - Cyphal</h3> <p>There are a few tools to interact with Cyphal devices:</p> <ul><li><a href="https://pycyphal.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">pycyphal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> python package,</li> <li><a href="https://github.com/OpenCyphal/yakut" target="_blank" rel="noopener noreferrer">Yakut<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> cli,</li> <li><a href="https://github.com/OpenCyphal/yukon" target="_blank" rel="noopener noreferrer">Yukon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> gui.</li></ul> <p>All of them are designed to work with different transport layers (CAN, UDP, serial) and different platforms (Linux, Windows, MacOS).</p> <p>Let's prepare everything before working with Cyphal.</p> <p><strong>1. Preparation</strong></p> <p>In general, you need to setup DSDL and transport config.</p> <p>Although you can hardcode all configs in your pycyphal script in a similar way as we do with pyserial or pythonCAN, by the design it is recommended to move your DSDL and transport config to a separate script that sets the environment variables. This approach allows to easily reuse your application in different platforms and with different transport layers.</p> <p>To start work with RaccoonLab CAN-sniffer, you need to configure the following environment variables:</p> <table><thead><tr><th>Environment variable</th> <th>Meaning</th></tr></thead> <tbody><tr><td>CYPHAL_PATH</td> <td>Path to DSDL. Let's use the default:<code>$HOME/.cyphal</code></td></tr> <tr><td>UAVCAN__NODE__ID</td> <td>The application node identifier</td></tr> <tr><td>UAVCAN__CAN__IFACE</td> <td>CAN iface name</td></tr> <tr><td>UAVCAN__CAN__BITRATE</td> <td>Arbitration/data segment bits per second</td></tr> <tr><td>UAVCAN__CAN__MTU</td> <td>Maximum transmission unit: 8 for classic CAN</td></tr></tbody></table> <ol><li>Let's clone public regulated data types into <code>.cyphal</code> folder:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.cyphal
<span class="token builtin class-name">cd</span> ~/.cyphal
<span class="token function">git</span> clone https://github.com/OpenCyphal/public_regulated_data_types.git
<span class="token function">git</span> clone https://github.com/Zubax/zubax_dsdl.git
<span class="token function">git</span> clone https://github.com/DS-015/ds015.git
</code></pre></div><ol start="2"><li>Let's create a setup script:</li></ol> <p><code>setup.sh</code> script for Linux (from <a href="https://github.com/PonomarevDA/tools/blob/main/nodes/sniffer/setup.sh" target="_blank" rel="noopener noreferrer">tools/nodes/sniffer/setup.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CYPHAL_PATH</span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$HOME</span>/.cyphal/zubax_dsdl:<span class="token environment constant">$HOME</span>/.cyphal/public_regulated_data_types/&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">UAVCAN__NODE__ID</span><span class="token operator">=</span><span class="token number">127</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">UAVCAN__CAN__IFACE</span><span class="token operator">=</span><span class="token string">&quot;slcan:/dev/ttyACM0@1000000&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">UAVCAN__CAN__BITRATE</span><span class="token operator">=</span><span class="token string">&quot;1000000 1000000&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">UAVCAN__CAN__MTU</span><span class="token operator">=</span><span class="token number">8</span>
</code></pre></div><p>The same <code>setup.ps1</code> script for Windows (from <a href="https://gist.github.com/sainquake/7f06a2425ee54178633eac60f9002608" target="_blank" rel="noopener noreferrer">sainquake/setup.ps1 gist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token variable">$env</span>:CYPHAL_PATH=<span class="token string">&quot;C:\workspace\pycyphal\demo\public_regulated_data_types&quot;</span>
<span class="token variable">$env</span>:UAVCAN__NODE__ID=<span class="token string">&quot;127&quot;</span>
<span class="token variable">$env</span>:UAVCAN__CAN__IFACE=<span class="token string">&quot;slcan:COM7@1000000&quot;</span>
<span class="token variable">$env</span>:UAVCAN__CAN__BITRATE=<span class="token string">&quot;1000000 1000000&quot;</span>
<span class="token variable">$env</span>:UAVCAN__CAN__MTU=<span class="token string">&quot;8&quot;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Add MacOS example here...</p></div> <ol start="3"><li>(Optionally) Add the setup of these environment variables to <code>~/.bashrc</code> on Linux or to the <code>Environment Variables</code> on Windows</li></ol> <img src="https://raw.githubusercontent.com/OpenCyphal/yakut/main/docs/windows_environment_cyphal_path.png" alt="drawing" width="400"> <p><strong>2. Pycyphal</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>For more details, please check the <a href="https://pycyphal.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">pycyphal docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p>You should always source the setup script before running a pycyphal script.</p> <p>The simplest pycyphal script (from <a href="https://github.com/PonomarevDA/tools/blob/main/nodes/sniffer/cyphal.py" target="_blank" rel="noopener noreferrer">tools/nodes/sniffer/cyphal.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) that just listen for heartbeat is shown below:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python3</span>
<span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> pycyphal
<span class="token keyword">import</span> pycyphal<span class="token punctuation">.</span>application
<span class="token keyword">import</span> uavcan<span class="token punctuation">.</span>node
<span class="token keyword">import</span> uavcan<span class="token punctuation">.</span>node<span class="token punctuation">.</span>Heartbeat_1_0

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    node_info <span class="token operator">=</span> uavcan<span class="token punctuation">.</span>node<span class="token punctuation">.</span>GetInfo_1_0<span class="token punctuation">.</span>Response<span class="token punctuation">(</span>
        uavcan<span class="token punctuation">.</span>node<span class="token punctuation">.</span>Version_1_0<span class="token punctuation">(</span>major<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minor<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        name<span class="token operator">=</span><span class="token string">&quot;co.raccoonlab.example&quot;</span>
    <span class="token punctuation">)</span>
    node <span class="token operator">=</span> pycyphal<span class="token punctuation">.</span>application<span class="token punctuation">.</span>make_node<span class="token punctuation">(</span>node_info<span class="token punctuation">)</span>
    node<span class="token punctuation">.</span>heartbeat_publisher<span class="token punctuation">.</span>mode <span class="token operator">=</span> uavcan<span class="token punctuation">.</span>node<span class="token punctuation">.</span>Mode_1_0<span class="token punctuation">.</span>OPERATIONAL
    node<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    heartbeat_sub <span class="token operator">=</span> node<span class="token punctuation">.</span>make_subscriber<span class="token punctuation">(</span>uavcan<span class="token punctuation">.</span>node<span class="token punctuation">.</span>Heartbeat_1_0<span class="token punctuation">)</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        transfer_from <span class="token operator">=</span> <span class="token keyword">await</span> heartbeat_sub<span class="token punctuation">.</span>receive_for<span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>transfer_from<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">if</span> transfer_from <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">else</span> <span class="token boolean">None</span><span class="token punctuation">)</span>

asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Another simple example tested on Windows: <a href="https://gist.github.com/sainquake/3731e2057d590673b84ad74e113caa1e" target="_blank" rel="noopener noreferrer">sainquake/py.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>3. Yakut CLI</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>For more details, please check the <a href="https://github.com/OpenCyphal/yakut" target="_blank" rel="noopener noreferrer">OpenCyphal/yakut repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div class="language-bash extra-class"><pre class="language-bash"><code>pip <span class="token function">install</span> yakut
</code></pre></div><p>Run shell script and then yakut monitor</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> setup.sh
y mon
</code></pre></div><p><img src="/assets/img/y_mon.e98ca179.png" alt="y_mon" title="y_mon"></p> <p>Here you can see a basic online nodes information:</p> <ul><li><a href="https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/7509.Heartbeat.1.0.dsdl" target="_blank" rel="noopener noreferrer">Hertbeat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> related things: id, mode, health, vssc, uptime</li> <li><a href="https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/430.GetInfo.1.0.dsdl" target="_blank" rel="noopener noreferrer">GetInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> related things: protocol, hardware and software versions, UID, name</li> <li><a href="https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/port/7510.List.1.0.dsdl" target="_blank" rel="noopener noreferrer">port.List<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> related things: subjects published by this node, subjects that this node is subscribed to, RPC-services.</li></ul> <p>You can request all existed parameters of the node with <code>y rl [OPTIONS] NODE_IDS</code> command, for example:</p> <div class="language- extra-class"><pre class="language-text"><code>$ y rl 20

[example.integer, example.string, system.name, uavcan.node.description, uavcan.node.id, uavcan.pub.feedback.id, uavcan.pub.feedback.type, uavcan.sub.setpoint.id, uavcan.sub.setpoint.type]
</code></pre></div><p>You can read or modify a register with command <code>y r NODE_IDS REGISTER_NAME [REGISTER_VALUE_ELEMENT]</code>. For example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ y r <span class="token number">20</span> uavcan.node.id

<span class="token number">20</span>
</code></pre></div><p>You can execute a command using <a href="https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/435.ExecuteCommand.1.1.dsdl" target="_blank" rel="noopener noreferrer">ExecuteCommand RPC-service<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with command <code>y cmd [OPTIONS] NODE_IDS COMMAND [PARAMETER]</code>. For example, you can restart the node:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>y cmd <span class="token number">20</span> restart <span class="token parameter variable">-e</span>
</code></pre></div><p>You can subscribe or publish a subject with <code>y sub [OPTIONS] [SUBJECT]</code> and <code>y pub [OPTIONS] SUBJECT FIELDS [SUBJECT FIELDS]</code>.</p> <p>For detaield usage examples and additional features of the yakut cli,
please type <code>y --help</code> or refer to the <a href="https://github.com/OpenCyphal/yakut" target="_blank" rel="noopener noreferrer">OpenCyphal/yakut docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><strong>4. Yukon GUI</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Details: <a href="https://github.com/OpenCyphal/yukon" target="_blank" rel="noopener noreferrer">github.com/OpenCyphal/yukon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
While Yukon is usable, it is in the alpha stage and is known to contain bugs.</p></div> <ol><li>Download the latest executable from <a href="https://github.com/OpenCyphal/yukon/releases" target="_blank" rel="noopener noreferrer">OpenCyphal/yukon/releases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Run <code>chmod +x ./Downloads/Yukon-linux-x86_64</code></li> <li>Source the setup script</li> <li>Execute <code>./Downloads/Yukon-linux-x86_64</code></li></ol> <p><img src="/assets/img/yukon_monitor.c39a470b.png" alt="yukon_monitor" title="yukon_monitor"></p> <h3 id="_4-5-high-level-dronecan"><a href="#_4-5-high-level-dronecan" class="header-anchor">#</a> 4.5 High level - DroneCAN</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>pydronecan is in process</p></div> <p>You can use <a href="https://github.com/UAVCAN/gui_tool" target="_blank" rel="noopener noreferrer">gui_tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for DroneCAN applications.</p> <p><img src="/assets/img/app_setup.d8b50db6.png" alt="app_setup" title="app_setup"></p> <p>In the Application Setup menu you need to set <code>1000000</code> to both can bus and adapter baud rates.</p> <p>After that you will get following window:</p> <p><img src="/assets/img/uavcan_gui_tool.8ca435b5.png" alt="gui_tool" title="gui_tool"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/RaccoonlabDev/uavcan_nodes_docs/edit/master/docs/guide/programmer_sniffer/sniffer.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/programmer_sniffer/programmer.html" class="prev">
        3. Programmer usage
      </a></span> <span class="next"><a href="/guide/programmer_sniffer/shipping.html">
        5. Shipping
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.39eec17d.js" defer></script><script src="/assets/js/2.e4757d80.js" defer></script><script src="/assets/js/1.6b7e298e.js" defer></script><script src="/assets/js/62.81a4b651.js" defer></script>
  </body>
</html>
