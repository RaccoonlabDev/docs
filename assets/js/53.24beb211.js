(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{275:function(e,t,r){e.exports=r.p+"assets/img/lw20_i2c.82bad2a4.png"},340:function(e,t,r){e.exports=r.p+"assets/img/lw20_i2c.5a22b588.png"},643:function(e,t,r){e.exports=r.p+"assets/img/y_mon.58b60cd8.png"},644:function(e,t,r){e.exports=r.p+"assets/img/yukon_monitor.64569f41.png"},645:function(e,t,r){e.exports=r.p+"assets/img/y_sub.ccb44708.png"},646:function(e,t,r){e.exports=r.p+"assets/img/yukon_sub.f0779a58.png"},797:function(e,t,r){"use strict";r.r(t);var a=r(14),n=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_5-cyphal-interface"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-cyphal-interface"}},[e._v("#")]),e._v(" 5. Cyphal Interface")]),e._v(" "),t("p",[e._v("This page is about Cyphal related details such as interface, supported features, registers, configuration and usage examples and software versions. For general information, refer to the "),t("RouterLink",{attrs:{to:"/guide/rangefinder/"}},[e._v("1. General")]),e._v(" page., for hardware related details including connection example scheme please refer "),t("RouterLink",{attrs:{to:"/guide/rangefinder/hardware.html"}},[e._v("here")]),e._v(".")],1),e._v(" "),t("h2",{attrs:{id:"_5-1-interface"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-interface"}},[e._v("#")]),e._v(" 5.1. Interface")]),e._v(" "),t("p",[e._v("This node interacts with the following data types:")]),e._v(" "),t("p",[t("strong",[e._v("Common for any node")])]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("Type")]),e._v(" "),t("th",[e._v("Message")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("pub")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/7509.Heartbeat.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.node.Heartbeat"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("2")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/430.GetInfo.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.node.GetInfo.Response"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("3")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/435.ExecuteCommand.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.node.ExecuteCommand"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("4")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/register/385.List.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.register.List"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("5")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/register/384.Access.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.register.Access"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("6")]),e._v(" "),t("td",[e._v("pub (since hardware v3)")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/port/7510.List.0.1.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.node.port.List"),t("OutboundLink")],1)])])])]),e._v(" "),t("p",[e._v("Here "),t("code",[e._v("ExecuteCommand")]),e._v(" supports "),t("code",[e._v("COMMAND_RESTART=65535")]),e._v(", "),t("code",[e._v("COMMAND_FACTORY_RESET=65532")]),e._v(" and "),t("code",[e._v("COMMAND_STORE_PERSISTENT_STATES=65530")]),e._v(".")]),e._v(" "),t("p",[t("strong",[e._v("Circuit status service")])]),e._v(" "),t("p",[e._v("Like any other RaccoonLab node, this node also supports the "),t("code",[e._v("Circuit status service")]),e._v(". It uses the following subjects:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("Type")]),e._v(" "),t("th",[e._v("Message")]),e._v(" "),t("th",[e._v("Topic name")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("pub")]),e._v(" "),t("td",[t("a",{attrs:{href:""}},[e._v("uavcan.si.sample.voltage.Scalar.1.0")])]),e._v(" "),t("td",[e._v("5v")])]),e._v(" "),t("tr",[t("td",[e._v("2")]),e._v(" "),t("td",[e._v("pub")]),e._v(" "),t("td",[t("a",{attrs:{href:""}},[e._v("uavcan.si.sample.voltage.Scalar.1.0")])]),e._v(" "),t("td",[e._v("vin")])]),e._v(" "),t("tr",[t("td",[e._v("3")]),e._v(" "),t("td",[e._v("pub")]),e._v(" "),t("td",[t("a",{attrs:{href:""}},[e._v("uavcan.si.sample.temperature.Scalar.1.0")])]),e._v(" "),t("td",[e._v("dev_temp")])])])]),e._v(" "),t("p",[t("strong",[e._v("Rangefinder service")])]),e._v(" "),t("p",[e._v("It uses the following subjects:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("Type")]),e._v(" "),t("th",[e._v("Message")]),e._v(" "),t("th",[e._v("Topic name")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("publisher")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/si/sample/length/Scalar.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.si.sample.length.Scalar.1.0"),t("OutboundLink")],1)]),e._v(" "),t("td",[e._v("range")])])])]),e._v(" "),t("h2",{attrs:{id:"_5-2-cyphal-registers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-cyphal-registers"}},[e._v("#")]),e._v(" 5.2. Cyphal Registers")]),e._v(" "),t("p",[e._v("Beside the standard "),t("code",[e._v("uavcan.*.<subject>.id")]),e._v(" and "),t("code",[e._v("uavcan.*.<subject>.type")]),e._v(" registers related to each subject, the node also have the following registers:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("Register name")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("uavcan.node.id")]),e._v(" "),t("td",[e._v("Defines a node-ID. Allowed values [0,127].")])]),e._v(" "),t("tr",[t("td",[e._v("2")]),e._v(" "),t("td",[e._v("system.name")]),e._v(" "),t("td",[e._v("Defines custom node name. If empty, the node will use the default name.")])]),e._v(" "),t("tr",[t("td",[e._v("3")]),e._v(" "),t("td",[e._v("uavcan.node.description")]),e._v(" "),t("td",[e._v("User/integrator-defined, human-readable description of this specific node.")])]),e._v(" "),t("tr",[t("td",[e._v("4")]),e._v(" "),t("td",[e._v("system.internal")]),e._v(" "),t("td",[e._v("Reserved")])]),e._v(" "),t("tr",[t("td",[e._v("5")]),e._v(" "),t("td",[e._v("system.protocol")]),e._v(" "),t("td",[e._v("Defines the protocol: "),t("br"),e._v(" 0 - Auto (always DroneCAN at the moment) "),t("br"),e._v(" 1 - Cyphal "),t("br"),e._v(" 2 - DroneCAN")])]),e._v(" "),t("tr",[t("td",[e._v("6")]),e._v(" "),t("td",[e._v("range.type")]),e._v(" "),t("td",[e._v("Defines which sensor to use: "),t("br"),e._v(" 0 - LW20/C (i2c) "),t("br"),e._v(" 1 - TF-Luna (uart) "),t("br"),e._v(" 2 - Garmin lite v3 (i2c) "),t("br"),e._v(" 3 - vl53l0x (i2c)")])]),e._v(" "),t("tr",[t("td",[e._v("7")]),e._v(" "),t("td",[e._v("range.dronecan_sensor_id")]),e._v(" "),t("td",[e._v("sensor_id in DroneCAN "),t("a",{attrs:{href:"https://dronecan.github.io/Specification/7._List_of_standard_data_types/#measurement",target:"_blank",rel:"noopener noreferrer"}},[e._v("Measurement"),t("OutboundLink")],1),e._v(" message")])])])]),e._v(" "),t("blockquote",[t("p",[e._v("Generated on Dec 03, 2023 for rangefinder_v1.6.0_e30e0394.")])]),e._v(" "),t("h2",{attrs:{id:"_5-3-getting-started-bench-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-getting-started-bench-test"}},[e._v("#")]),e._v(" 5.3. Getting started (bench test)")]),e._v(" "),t("p",[e._v("Before mounting on a real vehicle, especially when using the node for the first time, it is recommended to test the node and perform configuration on a bench using "),t("a",{attrs:{href:"https://github.com/OpenCyphal/yakut",target:"_blank",rel:"noopener noreferrer"}},[e._v("Yakut"),t("OutboundLink")],1),e._v(" cli or "),t("a",{attrs:{href:"https://github.com/OpenCyphal-Garage/yukon",target:"_blank",rel:"noopener noreferrer"}},[e._v("Yukon"),t("OutboundLink")],1),e._v(" gui.")]),e._v(" "),t("p",[e._v("This section provides a step-by-step checklist to test most features and configure essential parameters.")]),e._v(" "),t("p",[t("strong",[e._v("Step 1. Connect the Device")])]),e._v(" "),t("p",[e._v("Upon connection, the node should blink with a blue color. For bench testing and configuration, refer to the connection scheme below:")]),e._v(" "),t("p",[e._v("An example of connection scheme just for bench testing and configuration is shown below.")]),e._v(" "),t("img",{attrs:{src:r(340),alt:"drawing",width:"640"}}),e._v(" "),t("img",{attrs:{src:r(275),alt:"drawing",width:"640"}}),e._v(" "),t("p",[t("strong",[e._v("Note:")]),e._v(" Alternatively, in a vehicle you may want to connect the node via Molex CAN connector.")]),e._v(" "),t("p",[e._v("By the LED color you can determine the node state:")]),e._v(" "),t("ul",[t("li",[e._v("Orange blinking means either something is not properly configured or something wrong.")]),e._v(" "),t("li",[e._v("Red blinking means some critical error. It is related to a software or hardware issue.")]),e._v(" "),t("li",[e._v("Normally, the node should blink with blue color.")])]),e._v(" "),t("p",[e._v("Please, refer to the "),t("a",{attrs:{href:"https://docs.raccoonlab.co/guide/intro/leds.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("LED meaning page"),t("OutboundLink")],1),e._v(" for details.")]),e._v(" "),t("p",[t("strong",[e._v("Step 2. Configure the Environment")])]),e._v(" "),t("p",[e._v("For details about how to configure the environment, it is recommended to iether refer to the "),t("a",{attrs:{href:"https://github.com/OpenCyphal/yukon",target:"_blank",rel:"noopener noreferrer"}},[e._v("yukon"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://github.com/OpenCyphal/yakut",target:"_blank",rel:"noopener noreferrer"}},[e._v("yakut"),t("OutboundLink")],1),e._v(" instructions or to refer to our "),t("RouterLink",{attrs:{to:"/guide/programmer_sniffer/sniffer.html"}},[e._v("Cyphal usage instruction")]),e._v(".")],1),e._v(" "),t("p",[t("strong",[e._v("Step 3: Monitor the Node")])]),e._v(" "),t("p",[e._v("Assuming you have correctly connected the Cyphal node to a CAN sniffer and prepared the environment, you can now monitor node's status.")]),e._v(" "),t("p",[t("strong",[e._v("Using Yakut CLI")])]),e._v(" "),t("p",[e._v("Run the following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yakut monitor\n")])])]),t("p",[e._v("You should see the output similar to the one shown below:")]),e._v(" "),t("p",[t("img",{attrs:{src:r(643),alt:"Yakut Monitor",title:"Yakut Monitor"}})]),e._v(" "),t("p",[t("strong",[e._v("Using Yukon")])]),e._v(" "),t("p",[e._v("Alternatively, you can use the Yukon GUI to monitor the node. Simply launch the Yukon GUI and navigate to the Monitor window.")]),e._v(" "),t("p",[e._v("An example of this window is presented below:")]),e._v(" "),t("p",[t("img",{attrs:{src:r(644),alt:"",title:"Yukon Monitor"}})]),e._v(" "),t("p",[t("strong",[e._v("Step 4: Subscribe on range")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("y sub "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2500")]),e._v("\n")])])]),t("p",[t("img",{attrs:{src:r(645),alt:""}})]),e._v(" "),t("p",[t("img",{attrs:{src:r(646),alt:""}})]),e._v(" "),t("h2",{attrs:{id:"_5-4-px4-integration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-px4-integration"}},[e._v("#")]),e._v(" 5.4. PX4 integration")]),e._v(" "),t("blockquote",[t("p",[e._v("in process...")])]),e._v(" "),t("h2",{attrs:{id:"_5-5-software-versions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-software-versions"}},[e._v("#")]),e._v(" 5.5. Software versions")]),e._v(" "),t("p",[e._v("For latest (shipping) firmware please refer to "),t("RouterLink",{attrs:{to:"/guide/intro/firmware_upload.html"}},[e._v("Update the firmware")]),e._v(" page.")],1),e._v(" "),t("p",[e._v("For all avaliable for Rangefinder Cyphal & DroneCAN releases please check "),t("RouterLink",{attrs:{to:"/guide/rangefinder/"}},[e._v("1. General")]),e._v(" page.")],1),e._v(" "),t("details",[t("summary",[e._v("Click here to expand Legacy (Cyphal only) firmares")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Version")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("v1.0.8_46a2cf42")]),e._v(" "),t("br"),e._v(" Nov 9, 2022")]),e._v(" "),t("td",[e._v("First ever version of Cyphal rangefinder firmware. Support tf-luna only.")])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);