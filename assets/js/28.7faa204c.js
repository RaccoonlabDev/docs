(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{279:function(t,e,o){t.exports=o.p+"assets/img/connection-prog.1955457f.png"},702:function(t,e,o){t.exports=o.p+"assets/img/uploading_1_connect.e026932d.jpg"},703:function(t,e,o){t.exports=o.p+"assets/img/uploading_2_connected.ea55ef79.jpg"},704:function(t,e,o){t.exports=o.p+"assets/img/uploading_3_open_file.015787c0.jpg"},705:function(t,e,o){t.exports=o.p+"assets/img/uploading_4_choose_file.62f18306.jpg"},706:function(t,e,o){t.exports=o.p+"assets/img/uploading_5_programm_and_verify.239157d4.jpg"},707:function(t,e,o){t.exports=o.p+"assets/img/uploading_6_download_in_progress.23097fb8.jpg"},708:function(t,e,o){t.exports=o.p+"assets/img/uploading_7_verification_ok.33a65173.jpg"},709:function(t,e,o){t.exports=o.p+"assets/img/issue_cannot_connect_to_target.f1d76667.jpg"},710:function(t,e,o){t.exports=o.p+"assets/img/issue_no_st_link_detected.81d08ec7.jpg"},812:function(t,e,o){"use strict";o.r(e);var r=o(14),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"update-the-firmware-with-rl-programmer-on-windows-with-st-link-utility"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update-the-firmware-with-rl-programmer-on-windows-with-st-link-utility"}},[t._v("#")]),t._v(" Update the firmware with RL-programmer on Windows with ST-Link utility")]),t._v(" "),e("h3",{attrs:{id:"step-1-download-firmware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-1-download-firmware"}},[t._v("#")]),t._v(" Step 1. Download firmware")]),t._v(" "),e("p",[t._v("Download the latest firmware from "),e("RouterLink",{attrs:{to:"/guide/intro/firmware_upload.html"}},[t._v("Update the firmware")]),t._v(" page.")],1),t._v(" "),e("h3",{attrs:{id:"step-2-1-install-software"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-2-1-install-software"}},[t._v("#")]),t._v(" Step 2.1. Install software")]),t._v(" "),e("p",[t._v("Install "),e("code",[t._v("ST-LINK utility")]),t._v(" from "),e("a",{attrs:{href:"https://www.st.com/en/development-tools/stsw-link004.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("the official site"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"step-2-2-connect-the-programmer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-2-2-connect-the-programmer"}},[t._v("#")]),t._v(" Step 2.2. Connect the programmer")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Be sure that your SWD pins on the node and the needle sides are connected correctly (3.3 to 3.3, GND to GND).")])]),t._v(" "),e("p",[t._v("Prerequisites are:")]),t._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/guide/programmer_sniffer/"}},[t._v("RL Programmer-Sniffer")]),t._v(",")],1),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/RaccoonLabHardware/SWD-NEEDLE",target:"_blank",rel:"noopener noreferrer"}},[t._v("SWD-NEEDLE"),e("OutboundLink")],1),t._v(",")]),t._v(" "),e("li",[t._v("JST-GH 4 cable.")])]),t._v(" "),e("p",[t._v("An example of a connection is shown below.")]),t._v(" "),e("p",[e("img",{attrs:{src:o(279),alt:"connection-prog.png",title:"connection-prog.png"}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("SWD and CAN sockets look similar and they use the same 4-pin cable. SWD has 3.3V, but CAN has 5V. Don't mix them up.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("On the RL programmer "),e("code",[t._v("VUSB")]),t._v(" led should be orange, "),e("code",[t._v("3.3")]),t._v(" led should be red, "),e("code",[t._v("ST-link")]),t._v(" led should be blue, and "),e("code",[t._v("blink")]),t._v(" led should blink with yellow. If they are not, probably you are making something wrong. It also may indicate that the board works incorrectly.")])]),t._v(" "),e("h3",{attrs:{id:"step-2-3-upload-the-firmware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-2-3-upload-the-firmware"}},[t._v("#")]),t._v(" Step 2.3. Upload the firmware")]),t._v(" "),e("p",[t._v("Please expand and follow the instructions below (it has many pictures):")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Open "),e("code",[t._v("ST-LINK utility")]),t._v(", connect the programmer to the PC via USB")])]),t._v(" "),e("li",[e("p",[t._v("Connect target device to the programmer via SWD connectors as shown on the picture above with respect to the warnings. If you gen an error, check the "),e("a",{attrs:{href:"#311-windows-issues"}},[t._v("Windows issues")]),t._v(" section.")])]),t._v(" "),e("li",[e("p",[t._v("Choose option "),e("code",[t._v("Target -> Connect")]),t._v(". Device should be successfully connected. If you get an error, check the issues below.")])])]),t._v(" "),e("img",{attrs:{src:o(702),alt:"drawing",width:"512"}}),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("You should see "),e("code",[t._v("Device ID")]),t._v(" if everything fine (as shown in picture below)")])]),t._v(" "),e("img",{attrs:{src:o(703),alt:"drawing",width:"512"}}),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("Choose "),e("code",[t._v("file -> open file ...")]),t._v(" and navigate to the downloaded firmware .bin as shown in the pictures below")])]),t._v(" "),e("img",{attrs:{src:o(704),alt:"drawing",width:"512"}}),t._v(" "),e("img",{attrs:{src:o(705),alt:"drawing",width:"512"}}),t._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[t._v("Choose "),e("code",[t._v("Target -> Program & Verify ... CTRL+P")])])]),t._v(" "),e("img",{attrs:{src:o(706),alt:"drawing",width:"512"}}),t._v(" "),e("ol",{attrs:{start:"7"}},[e("li",[t._v("Wait until downloading is in progress")])]),t._v(" "),e("img",{attrs:{src:o(707),alt:"drawing",width:"512"}}),t._v(" "),e("ol",{attrs:{start:"8"}},[e("li",[t._v("You should see "),e("code",[t._v("Verification...OK")]),t._v(" if everything is ok.")])]),t._v(" "),e("img",{attrs:{src:o(708),alt:"drawing",width:"512"}}),t._v(" "),e("p",[t._v("At that point, the firmware is succesfully downloaded. You can verify the software version by using "),e("code",[t._v("gui_tool")]),t._v(".")]),t._v(" "),e("p",[t._v("Here is a list of the most popular issues and the recommendation how to solve them:")]),t._v(" "),e("p",[t._v("Wrong connection may leds to one of 2 following errors:")]),t._v(" "),e("ol",[e("li",[t._v("Can not connect to target")])]),t._v(" "),e("img",{attrs:{src:o(709),alt:"drawing",width:"512"}}),t._v(" "),e("p",[t._v("Programmer is successfully detected, but your device is not detected via SWD by the programmer. Either SWD connection is not ok, or there is a problem on the target side.")]),t._v(" "),e("blockquote",[e("p",[t._v("Sometimes it may happen that the 3.3 and GND are connected, but SWDIO and SWCLK are not ok enough. In this case the node blinks because it has a power, but connection is not stable enough to start a programming. Just make more tension by pushing jumpers a little bit and then press "),e("code",[t._v("Program & Verify")]),t._v(" one more time.")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("No ST-LINK detected")])]),t._v(" "),e("img",{attrs:{src:o(710),alt:"drawing",width:"512"}}),t._v(" "),e("p",[t._v("Either your programmer is not connected to your PC, or it is broken. Check the leds on the programmer device.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Its also possible to upload firmware using "),e("code",[t._v("STM32_Programmer_CLI.exe")])]),t._v(" "),e("p",[e("code",[t._v('STM32_Programmer_CLI.exe -c port=SWD -d "<PATH_TO_FIRMWARE>\\cyphal_example.bin" 0x08000000')])])])])}),[],!1,null,null,null);e.default=s.exports}}]);