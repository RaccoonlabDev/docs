(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{519:function(e,t,a){e.exports=a.p+"assets/img/connection-prog-dcp.9ab94240.png"},765:function(e,t,a){"use strict";a.r(t);var r=a(14),o=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"update-the-firmware-with-dronecode-probe-on-linux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-the-firmware-with-dronecode-probe-on-linux"}},[e._v("#")]),e._v(" Update the firmware with Dronecode probe on Linux")]),e._v(" "),t("h3",{attrs:{id:"step-1-download-firmware"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-1-download-firmware"}},[e._v("#")]),e._v(" Step 1. Download firmware")]),e._v(" "),t("p",[e._v("Download the latest firmware from "),t("RouterLink",{attrs:{to:"/guide/intro/firmware_upload.html"}},[e._v("Update the firmware")]),e._v(" page.")],1),e._v(" "),t("p",[e._v("You need .elf file here.")]),e._v(" "),t("h3",{attrs:{id:"step-2-1-install-software"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-1-install-software"}},[e._v("#")]),e._v(" Step 2.1. Install software")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("do we need something to install?")])]),e._v(" "),t("h3",{attrs:{id:"step-2-2-connect-the-programmer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-2-connect-the-programmer"}},[e._v("#")]),e._v(" Step 2.2. Connect the programmer")]),e._v(" "),t("p",[e._v("Prerequisites are:")]),e._v(" "),t("ul",[t("li",[e._v("Dronecode Probe,")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/RaccoonLabHardware/SWD-NEEDLE",target:"_blank",rel:"noopener noreferrer"}},[e._v("SWD-NEEDLE"),t("OutboundLink")],1),e._v(",")]),e._v(" "),t("li",[t("a",{attrs:{href:"../../../assets/wires/debug.png"}},[e._v("DEBUG-WIRE")]),e._v(".")])]),e._v(" "),t("p",[e._v("Connect all relative to the diagram below.\n"),t("img",{attrs:{src:a(519),alt:"connection-prog-dcp.png",title:"connection-prog-dcp.png"}})]),e._v(" "),t("h3",{attrs:{id:"step-2-3-upload-the-firmware"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-3-upload-the-firmware"}},[e._v("#")]),e._v(" Step 2.3. Upload the firmware")]),e._v(" "),t("p",[e._v("Commonly "),t("a",{attrs:{href:"https://kb.zubax.com/display/MAINKB/Uploading+a+.bin+or+ELF+executable+to+the+target",target:"_blank",rel:"noopener noreferrer"}},[e._v("zubax"),t("OutboundLink")],1),e._v(" or "),t("a",{attrs:{href:"https://black-magic.org/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("black-magic"),t("OutboundLink")],1),e._v(" instruction can be used.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("You can make .elf file from .bin, in case if you can`t finde it in releases. Just tape next command with changing paths")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("arm-none-eabi-objcopy -I binary -O elf32-little --change-section-address .data=0x08000000 input.bin output.elf\n")])])]),t("p",[e._v("Thanks to this "),t("a",{attrs:{href:"https://gist.github.com/pavel-kirienko/6835194423df07f6160af19f7ea33a4d",target:"_blank",rel:"noopener noreferrer"}},[e._v("gist"),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("In case of using Dronecode Probe you should power up device from CAN port.")])]),e._v(" "),t("p",[e._v("Firstly check GDB is installed:")]),e._v(" "),t("ul",[t("li",[e._v("in Ubuntu "),t("code",[e._v("gdb firmware.elf")]),e._v(" (should be installed by default)")]),e._v(" "),t("li",[e._v("in Windows "),t("code",[e._v("arm-none-eabi-gdb firmware.elf")]),e._v(" (It can be installed from "),t("a",{attrs:{href:"https://developer.arm.com/downloads/-/gnu-rm",target:"_blank",rel:"noopener noreferrer"}},[e._v("developer.arm.com/downloads"),t("OutboundLink")],1),e._v(")\nYou will se something like this:")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('GNU gdb (Ubuntu 12.1-0ubuntu1~22.04) 12.1\nCopyright (C) 2022 Free Software Foundation, Inc.\n...\nType "apropos word" to search for commands related to "word".\n(gdb) \n')])])]),t("p",[e._v("Type "),t("code",[e._v("target extended-remote /dev/ttyACM0")]),e._v(" in case of Ubuntu and "),t("code",[e._v("target extended-remote COM4")]),e._v(" in case of Windows.\nApply next commands:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("monitor tpwr enable")]),e._v(" - enable power rail")]),e._v(" "),t("li",[t("code",[e._v("monitor swdp_scan")]),e._v(" - scan device")]),e._v(" "),t("li",[t("code",[e._v("attach 1")])]),e._v(" "),t("li",[t("code",[e._v("load")]),e._v(" - load firmware")]),e._v(" "),t("li",[t("code",[e._v("quit")]),e._v(" - quit GDB")])]),e._v(" "),t("p",[e._v("You should see something like this replyes at the end:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(gdb) monitor tpwr enable\nEnabling target power\n(gdb) monitor swdp_scan\nTarget voltage: 3.3V\nAvailable Targets:\nNo. Att Driver\n 1      STM32F1 medium density M3\n(gdb) attach 1\nAttaching to program: C:\\workspace\\mini_v2_node\\build\\obj\\cyphal_example.elf, Remote target\n0x0800a38e in ?? ()\n(gdb) load\nLoading section .data, size 0x80d8 lma 0x8000000\nStart address 0x00000000, load size 32984\nTransfer rate: 16 KB/sec, 970 bytes/write.\n(gdb) quit\nA debugging session is active.\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/mike-pittelko/BlackMagic-STM32CubeIDE",target:"_blank",rel:"noopener noreferrer"}},[e._v("This"),t("OutboundLink")],1),e._v(" instruction can be used to work with Dronecode Probe under STM32CubeIDE.")])])])}),[],!1,null,null,null);t.default=o.exports}}]);