(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{515:function(e,t,o){e.exports=o.p+"assets/img/state_machine.f03dc97e.png"},516:function(e,t,o){e.exports=o.p+"assets/img/ublox1.2645bd4d.png"},517:function(e,t,o){e.exports=o.p+"assets/img/ublox2.efc69b40.png"},518:function(e,t,o){e.exports=o.p+"assets/img/ublox3.219de12d.png"},761:function(e,t,o){"use strict";o.r(t);var n=o(14),s=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_7-u-blox-module-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-u-blox-module-setup"}},[e._v("#")]),e._v(" 7. U-Blox module setup")]),e._v(" "),t("p",[e._v("You can either rely on automatic ublox configuration or perform it manually.")]),e._v(" "),t("h3",{attrs:{id:"_7-1-automatic-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-automatic-configuration"}},[e._v("#")]),e._v(" 7.1. Automatic configuration")]),e._v(" "),t("p",[e._v("Wtheter to run the ublox configuration or not is defined by the corresponding "),t("code",[e._v("gnss_config")]),e._v(" parameter that exists on both Cyphal and DroneCAN software.")]),e._v(" "),t("p",[e._v("You have 3 options:")]),e._v(" "),t("ol",[t("li",[e._v("(By default) AUTO. The node is shipped with this mode by default. It check input data from ublox for 3 seconds. If data is appeared, it will set "),t("code",[e._v("gnss_config=2(DONE)")]),e._v(", save parameters and continue working in the normal process. Otherwise it will set "),t("code",[e._v("gnss_config=1(FORCE)")]),e._v(", save parameters and reboots.")]),e._v(" "),t("li",[e._v("FORCE. In this mode the device will always starts with the configuration process. If the configuration is successfull, it will set "),t("code",[e._v("gnss_config=2(DONE)")]),e._v(", save parameters and continue working in operational mode. Otherwise, it will continue work in ERROR mode.")]),e._v(" "),t("li",[e._v("DONE. After the successfull configuration you will be always in this mode only. The node skips the configuration and goes to the operational mode immediately. If at some point of time the frequency is less than 1 Hz, it will set ERROR health.")])]),e._v(" "),t("p",[e._v("The state machine of the node is shown below.")]),e._v(" "),t("img",{attrs:{src:o(515),alt:"drawing"}}),e._v(" "),t("p",[e._v("For LED meaning info, please check "),t("RouterLink",{attrs:{to:"/guide/intro/leds.html"}},[e._v("LED indication standard")]),e._v(" page.")],1),e._v(" "),t("p",[e._v("In most cases the automatic configuration is enough.")]),e._v(" "),t("p",[e._v("If something goes wrong, you can always repeat the ublox configuration in force mode.")]),e._v(" "),t("h3",{attrs:{id:"_7-2-python-script"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-python-script"}},[e._v("#")]),e._v(" 7.2 Python script")]),e._v(" "),t("p",[e._v("This "),t("a",{attrs:{href:"https://github.com/RaccoonlabDev/ublox-setup",target:"_blank",rel:"noopener noreferrer"}},[e._v("script"),t("OutboundLink")],1),e._v(" checks all the necessary packets and configures them as they should be. Just copy the repo and install the dependencies:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("pip install pyubx2\npip install pyserial\n")])])]),t("p",[e._v("Then run the "),t("code",[e._v("ubx.py -s <serialport>")]),e._v(" script.")]),e._v(" "),t("h3",{attrs:{id:"_7-3-manual-setup-with-u-center"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-manual-setup-with-u-center"}},[e._v("#")]),e._v(" 7.3 Manual setup with u-center")]),e._v(" "),t("p",[e._v("For GNSS module setup u-center (not u-center 2) can be used, it can be downloaded from "),t("a",{attrs:{href:"https://www.u-blox.com/en/product/u-center",target:"_blank",rel:"noopener noreferrer"}},[e._v("the official website"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("Desription of UBX protocol is presented in "),t("a",{attrs:{href:"https://content.u-blox.com/sites/default/files/products/documents/u-blox8-M8_ReceiverDescrProtSpec_UBX-13003221.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("UBX-13003221"),t("OutboundLink")],1),e._v(" document.")]),e._v(" "),t("p",[e._v("The description can be found in the "),t("a",{attrs:{href:"https://content.u-blox.com/sites/default/files/ZED-F9P_IntegrationManual_UBX-18010802.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Integration Manual"),t("OutboundLink")],1),e._v(" on page 109, section C.2, but in our case it needs to be modified slightly.")]),e._v(" "),t("ol",[t("li",[e._v("Install u-center (not u-center 2).")]),e._v(" "),t("li",[e._v("Connect to the module by UART at 9600 by default.")]),e._v(" "),t("li",[e._v("Open View->Configuration view.")]),e._v(" "),t("li",[e._v("Choose PRT(Ports) and set up Boudrate to 921600, Press send.")])]),e._v(" "),t("img",{attrs:{src:o(516),alt:"drawing"}}),e._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[e._v("Choose NAV5 (Navigation 5) and set up Dynamic model to 7 - Airborne < 2g.")]),e._v(" "),t("li",[e._v("Choose TP5 (Timepulse 5) and set up period to 100000 us and length to 50000 us.")]),e._v(" "),t("li",[e._v("Disable all NMEA frames: GGA,GLL,GSA,RMC,VTG - by unchecking all ports and press send.")])]),e._v(" "),t("img",{attrs:{src:o(517),alt:"drawing"}}),e._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[e._v("Enable next UBX frames:")])]),e._v(" "),t("ul",[t("li",[e._v("UBX-MON-HW (0x0a 0x09)")]),e._v(" "),t("li",[e._v("UBX-NAV-COV (0x01 0x36)")]),e._v(" "),t("li",[e._v("UBX-NAV-PVT (0x01 0x07)")]),e._v(" "),t("li",[e._v("UBX-NAV-STATUS (0x01 0x03)")]),e._v(" "),t("li",[e._v("UBX-TIM-TM2 (0x0d 0x03)")])]),e._v(" "),t("p",[e._v("All the frames used can be found in the "),t("a",{attrs:{href:"https://content.u-blox.com/sites/default/files/documents/u-blox-F9-HPG-1.32_InterfaceDescription_UBX-22008968.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Interface Description"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("ol",{attrs:{start:"9"}},[t("li",[e._v("Choose RATE (Rates) and set up as shown in the figure below")])]),e._v(" "),t("img",{attrs:{src:o(518),alt:"drawing"}}),e._v(" "),t("ol",{attrs:{start:"10"}},[t("li",[e._v("Choose CFG (Configuration) and Save current configuration by pressing send.")])])])}),[],!1,null,null,null);t.default=s.exports}}]);