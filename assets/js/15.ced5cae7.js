(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{300:function(t,e,a){t.exports=a.p+"assets/img/bench_test_standby.e8b9d676.gif"},301:function(t,e,a){t.exports=a.p+"assets/img/bench_test_mini_v2.2ad536c6.png"},302:function(t,e,a){t.exports=a.p+"assets/img/y_mon.e98ca179.png"},303:function(t,e,a){t.exports=a.p+"assets/img/yukon_monitor.c39a470b.png"},417:function(t,e,a){t.exports=a.p+"assets/img/yukon_reset.4a715a29.jpg"},418:function(t,e,a){t.exports=a.p+"assets/img/command_factory_reset.6f41e259.gif"},419:function(t,e,a){t.exports=a.p+"assets/img/main_config.023f0108.gif"},420:function(t,e,a){t.exports=a.p+"assets/img/yukon_monitor_fully_configured.12d4d743.png"},421:function(t,e,a){t.exports=a.p+"assets/img/command_save.3a28e43a.gif"},422:function(t,e,a){t.exports=a.p+"assets/img/registers.64849833.png"},423:function(t,e,a){t.exports=a.p+"assets/img/ardupilot.03c2db24.png"},424:function(t,e,a){t.exports=a.p+"assets/img/px4_actuator_testing.2ab8434b.png"},735:function(t,e,a){"use strict";a.r(e);var s=a(14),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_5-cyphal-pwm-node"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-cyphal-pwm-node"}},[t._v("#")]),t._v(" 5. Cyphal PWM node")]),t._v(" "),e("p",[t._v("This page is about Cyphal related details such as interface, supported features, registers, configuration and usage examples and software versions. For general information please refer to the "),e("RouterLink",{attrs:{to:"/guide/can_pwm/"}},[t._v("1. General")]),t._v(" page, for hardware related details including wiring examples please refer to the "),e("RouterLink",{attrs:{to:"/guide/can_pwm/can_pwm_micro.html"}},[t._v("uNode")]),t._v(" or "),e("RouterLink",{attrs:{to:"/guide/can_pwm/can_pwm_mini_v2.html"}},[t._v("Mini v2")]),t._v(" pages.")],1),t._v(" "),e("h2",{attrs:{id:"_5-1-cyphal-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-cyphal-interface"}},[t._v("#")]),t._v(" 5.1. Cyphal interface")]),t._v(" "),e("p",[t._v("This node interacts with the following data types:")]),t._v(" "),e("p",[e("strong",[t._v("Common for any node")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("№")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Message")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("1")]),t._v(" "),e("td",[t._v("publisher")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/7509.Heartbeat.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("uavcan.node.Heartbeat"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("2")]),t._v(" "),e("td",[t._v("RPC-service")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/430.GetInfo.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("uavcan.node.GetInfo.Response"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("3")]),t._v(" "),e("td",[t._v("RPC-service")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/435.ExecuteCommand.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("uavcan.node.ExecuteCommand"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("4")]),t._v(" "),e("td",[t._v("RPC-service")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/register/385.List.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("uavcan.register.List"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("5")]),t._v(" "),e("td",[t._v("RPC-service")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/register/384.Access.1.0.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("uavcan.register.Access"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("6")]),t._v(" "),e("td",[t._v("publisher")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/uavcan/node/port/7510.List.0.1.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("uavcan.node.port.List"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[t._v("Here "),e("code",[t._v("ExecuteCommand")]),t._v(" supports "),e("code",[t._v("COMMAND_RESTART=65535")]),t._v(", "),e("code",[t._v("COMMAND_FACTORY_RESET=65532")]),t._v(" and "),e("code",[t._v("COMMAND_STORE_PERSISTENT_STATES=65530")]),t._v(".")]),t._v(" "),e("p",[e("strong",[t._v("Actuator (Esc/Servo) service")])]),t._v(" "),e("p",[t._v("This node supports the "),e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/tree/master/reg/udral/service/actuator",target:"_blank",rel:"noopener noreferrer"}},[t._v("UDRAL Actuator (ESC/Servo) service"),e("OutboundLink")],1),t._v(". It uses the following subjects:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("№")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Message")]),t._v(" "),e("th",[t._v("Topic name")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("1")]),t._v(" "),e("td",[t._v("subscriber")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/tree/master/reg/udral/service/actuator/common/sp",target:"_blank",rel:"noopener noreferrer"}},[t._v("reg.udral.service.actuator.common.sp/*"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("setpoint")])]),t._v(" "),e("tr",[e("td",[t._v("2")]),t._v(" "),e("td",[t._v("subscriber")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/reg/udral/service/common/Readiness.0.1.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("reg.udral.service.common.Readiness.0.1"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("readiness")])]),t._v(" "),e("tr",[e("td",[t._v("3")]),t._v(" "),e("td",[t._v("publisher")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/reg/udral/service/actuator/common/Feedback.0.1.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("reg.udral.service.actuator.common.Feedback.0.1"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("feedback")])])])]),t._v(" "),e("p",[e("strong",[t._v("Circuit status service")])]),t._v(" "),e("p",[t._v("Like any other RaccoonLab node, this node also supports the "),e("code",[t._v("Circuit status service")]),t._v(". It uses the following subjects:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("№")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Message")]),t._v(" "),e("th",[t._v("Topic name")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("1")]),t._v(" "),e("td",[t._v("pub")]),t._v(" "),e("td",[e("a",{attrs:{href:""}},[t._v("uavcan.si.sample.voltage.Scalar.1.0")])]),t._v(" "),e("td",[t._v("crct.5v")])]),t._v(" "),e("tr",[e("td",[t._v("2")]),t._v(" "),e("td",[t._v("pub")]),t._v(" "),e("td",[e("a",{attrs:{href:""}},[t._v("uavcan.si.sample.voltage.Scalar.1.0")])]),t._v(" "),e("td",[t._v("crct.vin")])]),t._v(" "),e("tr",[e("td",[t._v("3")]),t._v(" "),e("td",[t._v("pub")]),t._v(" "),e("td",[e("a",{attrs:{href:""}},[t._v("uavcan.si.sample.temperature.Scalar.1.0")])]),t._v(" "),e("td",[t._v("crct.temp")])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Since "),e("RouterLink",{attrs:{to:"/guide/can_pwm/can_pwm_micro.html"}},[t._v("uNode")]),t._v(" doesn't have an internal DC-DC, it doesn't provide Vin voltage.")],1)]),t._v(" "),e("h2",{attrs:{id:"_5-2-cyphal-registers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-cyphal-registers"}},[t._v("#")]),t._v(" 5.2. Cyphal Registers")]),t._v(" "),e("p",[t._v("The node with the latest v1.5.10 software has the following non port related registers:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("№")]),t._v(" "),e("th",[t._v("Register name")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("1")]),t._v(" "),e("td",[t._v("uavcan.node.id")]),t._v(" "),e("td",[t._v("Defines a node-ID. Allowed values [0,127].")])]),t._v(" "),e("tr",[e("td",[t._v("2")]),t._v(" "),e("td",[t._v("system.name")]),t._v(" "),e("td",[t._v("Defines custom node name. If empty, the node will use the default name.")])]),t._v(" "),e("tr",[e("td",[t._v("3")]),t._v(" "),e("td",[t._v("uavcan.node.description")]),t._v(" "),e("td",[t._v("User/integrator-defined, human-readable description of this specific node.")])]),t._v(" "),e("tr",[e("td",[t._v("4")]),t._v(" "),e("td",[t._v("pwm.ttl_ms")]),t._v(" "),e("td",[t._v("Time to live (read about CONTROL_TIMEOUT "),e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/reg/udral/service/actuator/esc/_.0.1.dsdl#L55",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),e("OutboundLink")],1),t._v(")")])]),t._v(" "),e("tr",[e("td",[t._v("5")]),t._v(" "),e("td",[t._v("pwm.control_mode")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/70573cb98a346f5a9aee54ce421a8a79700df2b4/reg/udral/service/actuator/esc/_.0.1.dsdl#L69",target:"_blank",rel:"noopener noreferrer"}},[t._v("Control mode"),e("OutboundLink")],1),t._v(": "),e("br"),t._v(" 0 - ratiometric [0; 1.0] "),e("br"),t._v(" 1 - PX4 DroneCAN legacy [0; 8192]")])]),t._v(" "),e("tr",[e("td",[t._v("6")]),t._v(" "),e("td",[t._v("pwm*.ch")]),t._v(" "),e("td",[t._v("Index of Vector31 setpoint: "),e("br"),t._v(" 0-30 - enabled "),e("br"),t._v(" 255 - disabled")])]),t._v(" "),e("tr",[e("td",[t._v("7")]),t._v(" "),e("td",[t._v("pwm*.min")]),t._v(" "),e("td",[t._v("PWM duration when setpoint is min")])]),t._v(" "),e("tr",[e("td",[t._v("8")]),t._v(" "),e("td",[t._v("pwm*.max")]),t._v(" "),e("td",[t._v("PWM duration when setpoint is max")])]),t._v(" "),e("tr",[e("td",[t._v("9")]),t._v(" "),e("td",[t._v("pwm*.def")]),t._v(" "),e("td",[t._v("PWM duration when setpoint is not present or device is not engaged")])])])]),t._v(" "),e("details",[e("summary",[t._v("Click here to show the full registers list of mini v2 node with cyphal v1.5.10 software.")]),t._v(" "),e("p",[t._v("The registers and their values below were received by executing the commands:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("y cmd "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65532")]),t._v("\ny cmd "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),t._v("\ny rl "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" y rb "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" jq "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" registers.json\n")])])]),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm.control_mode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm.ttl_ms"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm1.ch"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm1.def"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm1.max"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm1.min"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm2.ch"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm2.def"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm2.max"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm2.min"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm3.ch"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm3.def"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm3.max"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm3.min"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm4.ch"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm4.def"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm4.max"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pwm4.min"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"system.name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"co.raccoonlab.mini"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.node.description"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.node.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.crct.5v.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.crct.5v.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uavcan.si.sample.voltage.Scalar.1.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.crct.temp.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.crct.temp.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uavcan.si.sample.temperature.Scalar.1.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.crct.vin.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.crct.vin.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uavcan.si.sample.voltage.Scalar.1.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback1.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback1.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reg.udral.service.actuator.common.Feedback.0.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback2.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback2.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reg.udral.service.actuator.common.Feedback.0.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback3.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback3.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reg.udral.service.actuator.common.Feedback.0.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback4.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.pub.feedback4.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reg.udral.service.actuator.common.Feedback.0.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.sub.readiness.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.sub.readiness.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reg.udral.service.common.Readiness"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.sub.setpoint.id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uavcan.sub.setpoint.type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reg.udral.service.actuator.common.sp.Vector31"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Mini v2 node has 4 PWM channels, "),e("RouterLink",{attrs:{to:"/guide/can_pwm/can_pwm_micro.html"}},[t._v("Micro node")]),t._v(" has only 2 PWM channels.")],1)]),t._v(" "),e("h2",{attrs:{id:"_5-3-getting-started-bench-test"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-getting-started-bench-test"}},[t._v("#")]),t._v(" 5.3. Getting started (bench test)")]),t._v(" "),e("p",[t._v("Before using in the real application, it is necessary to configure the device. "),e("a",{attrs:{href:"https://github.com/OpenCyphal/yakut",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yakut"),e("OutboundLink")],1),t._v(" cli and "),e("a",{attrs:{href:"https://github.com/OpenCyphal-Garage/yukon",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yukon"),e("OutboundLink")],1),t._v(" gui are recommended.")]),t._v(" "),e("p",[t._v("This section tries to cover all aspects of Mini and Micro nodes usage from the Cyphal side.\nIf something is unclear or works not as expected, please open an issue on "),e("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("RaccoonlabDev/docs"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("The tutorial below is based on Yukon 2023.3.45 and yakut 0.13.0.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("For safety reasons, a node configuration should only be carried out with unarmed propellers!")])]),t._v(" "),e("p",[e("strong",[t._v("Step 1. Connect the node properly to a sniffer. Initially, when there is no command, the node goes into STANDBY mode and LED should blink")])]),t._v(" "),e("p",[t._v("The simplest connection scheme with a low power servo without load just for bench testing and configuration is shown below.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(300),alt:"bench_test_standby",title:"bench_test_standby"}})]),t._v(" "),e("p",[t._v("Fig. Micro node connected to an unloaded servo and a sniffer without an input command")]),t._v(" "),e("p",[e("img",{attrs:{src:a(301),alt:"bench_test_standby",title:"bench_test_standby"}}),t._v("\nFig. Mini v2 node connected to an unloaded and a sniffer without an input command")]),t._v(" "),e("p",[t._v("For other connection schemes, e.g. with ESC and motor, please refer to the hardware page of the corresponding board.")]),t._v(" "),e("p",[t._v("Initially, without any input commands, the node should blink with Blue/Green color, which means that the node is in STANDBY state. If the node blinks with Yellow and even Red color it means that the node has a warning or error. For better understanding of the color, please refer to the "),e("RouterLink",{attrs:{to:"/guide/intro/leds.html"}},[t._v("LED Meaning")]),t._v(" page.")],1),t._v(" "),e("p",[e("strong",[t._v("Step 2. Configure the environment with either yakut or yukon. You should observe the node.")])]),t._v(" "),e("p",[t._v("To configure the environment you typically will need to:")]),t._v(" "),e("ol",[e("li",[t._v("Configure all required environment variables")]),t._v(" "),e("li",[t._v("Compile DSDL based on public regulated data types")]),t._v(" "),e("li",[t._v("Create SLCAN based on CAN sniffer")])]),t._v(" "),e("p",[t._v("Please refer to "),e("code",[t._v("Yakut")]),t._v(" and "),e("code",[t._v("Yukon")]),t._v(" documentation to understand how to do it.")]),t._v(" "),e("p",[t._v("The state of the node can be visualized using "),e("code",[t._v("Yakut")]),t._v(". Run "),e("code",[t._v("y mon")]),t._v(" to see the node. The possible command output is:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(302),alt:"y_mon",title:"y_mon"}})]),t._v(" "),e("p",[t._v("Alternatively, you can use "),e("code",[t._v("Yukon")]),t._v(". An example of monitor is shown below:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(303),alt:"yukon_monitor",title:"yukon_monitor"}})]),t._v(" "),e("p",[e("strong",[t._v("Step 3. Factory reset")])]),t._v(" "),e("p",[t._v("A force reset of the firmware to default is recommended after every software update.")]),t._v(" "),e("p",[t._v("Next steps are expected that your firmware in the default state.")]),t._v(" "),e("p",[t._v("You can reset the registers by sending 2 commands:")]),t._v(" "),e("ul",[e("li",[t._v("first "),e("code",[t._v("COMMAND_FACTORY_RESET=65532")]),t._v(",")]),t._v(" "),e("li",[t._v("then "),e("code",[t._v("COMMAND_RESTART=65535")]),t._v(".")])]),t._v(" "),e("p",[t._v("Below is an example of how to send the commands using Yakut.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(417),alt:"yukon_reset",title:"yukon_reset"}})]),t._v(" "),e("p",[t._v("Alternatively, you can send them using Yukon.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(418),alt:"yukon_monitor",title:"yukon_monitor"}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The error after COMMAND_RESTART appeared because the node restarts immediately without replying. That's ok.")])]),t._v(" "),e("p",[e("strong",[t._v("Step 4. Ports configuration")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("According to "),e("a",{attrs:{href:"https://opencyphal.org/specification/Cyphal_Specification.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("the specification"),e("OutboundLink")],1),t._v(" the port IDs should be in the range [0, 6143]. Disabled subjects should have port id 65535.")])]),t._v(" "),e("p",[t._v("A minimum possible application requires "),e("code",[t._v("readiness")]),t._v(" and "),e("code",[t._v("setpoint")]),t._v(" ports to be configured:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(419),alt:"yukon_monitor",title:"yukon_monitor"}})]),t._v(" "),e("p",[t._v("A fully configured application with auxillary ports "),e("code",[t._v("crct.5v")]),t._v(", "),e("code",[t._v("crct.temp")]),t._v(", "),e("code",[t._v("crct.vin")]),t._v(", "),e("code",[t._v("feedback*")]),t._v(" can be as following:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(420),alt:"yukon_monitor_fully_configured",title:"yukon_monitor_fully_configured"}})]),t._v(" "),e("p",[t._v("Some parameters only take effect after a restart, so always save the registers and restart the node after making changes:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(421),alt:"yukon_monitor",title:"yukon_monitor"}})]),t._v(" "),e("p",[t._v("If Yukon commands don't work, you can always send them with Yakut:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("y cmd "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65530")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# save registers")]),t._v("\ny cmd "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# restart the device")]),t._v("\n")])])]),e("p",[e("strong",[t._v("Step 5. Parameters configuration")])]),t._v(" "),e("p",[t._v("Open the "),e("code",[t._v("Registers")]),t._v(" window.")]),t._v(" "),e("img",{attrs:{src:a(422),alt:"drawing"}}),t._v(" "),e("p",[t._v("The following parameters must be configured via the register interface:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("uavcan.node.id")]),t._v(",")]),t._v(" "),e("li",[e("code",[t._v("pwm*")]),t._v(" registers,")]),t._v(" "),e("li",[e("code",[t._v("pwm.ttl_ms")]),t._v(",")])]),t._v(" "),e("p",[t._v("The value of "),e("code",[t._v("uavcan.node.id")]),t._v(" register must be unique within the network. By default it is 50. It must be withing the range [1; 126].")]),t._v(" "),e("p",[t._v("The register value of "),e("code",[t._v("pwm.ttl_ms")]),t._v(" must be at least twice more than the setpoint period!\nThe default value is 500 ms, that should be good for mist of the application.")]),t._v(" "),e("p",[t._v("Since right now the setpoint type is Vector31, "),e("code",[t._v("pwm*.ch")]),t._v(" registers supports values from 0 to 30.\nOther values will configure the corresponded pwm pin to the default state.")]),t._v(" "),e("p",[t._v("By default, "),e("code",[t._v("pwm*.min=1000")]),t._v(", "),e("code",[t._v("pwm*.max=2000")]),t._v(" and "),e("code",[t._v("pwm*.def=1000")]),t._v(" are configured for ESC For ESC.\nIf you use a servo, you are probably need to customize them.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Don't forget that pwm1 and pwm2 have 5V3, but pwm3 and pwm4 have RX pin instead.")])]),t._v(" "),e("p",[t._v("In the end of the configuration it is necessary to save registers and restart the node.")]),t._v(" "),e("p",[e("strong",[t._v("Step 6. Control the node")])]),t._v(" "),e("p",[t._v("Let's say, you have the following config:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("pwm1.ch")]),t._v(" = 0,")]),t._v(" "),e("li",[e("code",[t._v("setpoint")]),t._v(" port is 2000,")]),t._v(" "),e("li",[e("code",[t._v("readiness")]),t._v(" port is 2001,")]),t._v(" "),e("li",[e("code",[t._v("feedback1")]),t._v(" port is 2002.")])]),t._v(" "),e("p",[t._v("and you have saved the registers and restarted the node as it was mentioned before.")]),t._v(" "),e("p",[t._v("You can create in Yukon setpoint and readiness publishers and feedback subscription and control the node as shown in the video below:")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://youtu.be/rS9HSDe6dc0",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://img.youtube.com/vi/rS9HSDe6dc0/0.jpg",alt:"Description"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("Please, pay attention on the following details of how the node works.")]),t._v(" "),e("ol",[e("li",[e("p",[e("code",[t._v("Readiness")]),t._v(" command controls the device mode. By default it is STANDBY where it doesn't react on any input setpoint. You should explicetly set ENGAGED mode. If a node doesn't receive this message for "),e("code",[t._v("ttl_ms")]),t._v(" milliseconds, it goes back to the STANDBY mode. In STANDBY mode node blinks with BLUE color, in ENGAGED mode it has solid BLUE color.")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Setpoint")]),t._v(" command has an effect only if the device is ENGAGED. If a node doesn't receive setpoint for "),e("code",[t._v("ttl_ms")]),t._v(" milliseconds, by the safety reasons it goes to the default state.")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Feedback")]),t._v(" is useful to diagnose the node state.")])])]),t._v(" "),e("p",[t._v("The described behaviour is based on UDRAL Electronic Speed Controller (ESC) service. Mode details: "),e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/reg/udral/service/actuator/esc/_.0.1.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/OpenCyphal/public_regulated_data_types"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("details",[e("summary",[t._v("Alternatively you can control the node with Yakut CLI. Click here to show details.")]),t._v(" "),e("p",[t._v("Let's say, you have configured registers.")]),t._v(" "),e("p",[t._v("First terminal session. Configure the Yakut environment variables and start to periodically send the readiness message to engage the device. Try the following script. Specify NODE_ID as your actual node ID.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODE_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTER_BASE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("uavcan.sub.readiness\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PORT_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("y r $NODE_ID $REGISTER_BASE.id"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DATA_TYPE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("y r $NODE_ID $REGISTER_BASE.type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tr")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\ny pub "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$PORT_ID")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DATA_TYPE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n")])])]),e("p",[t._v("Another terminal session. Configure the Yakut environment variables and start to periodically send the setpoint command. Try the following script. Specify NODE_ID as your actual node ID and VALUE as desired value of setpoint withing range [0.0, 1.0]:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODE_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VALUE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTER_BASE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("uavcan.sub.setpoint\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PORT_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("y r $NODE_ID $REGISTER_BASE.id"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DATA_TYPE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("y r $NODE_ID $REGISTER_BASE.type "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tr")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\ny pub "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.05")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$PORT_ID")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DATA_TYPE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"['),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VALUE")]),t._v(", "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VALUE")]),t._v(", "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VALUE")]),t._v(", "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VALUE")]),t._v(']"')]),t._v("\n")])])])]),t._v(" "),e("h2",{attrs:{id:"_5-4-ardupilot-integration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-ardupilot-integration"}},[t._v("#")]),t._v(" 5.4. Ardupilot integration")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Ardupilot doesn't officially support Cyphal (at the time of writing), so it is expected to use "),e("a",{attrs:{href:"https://github.com/PonomarevDA/ardupilot/tree/cyphal",target:"_blank",rel:"noopener noreferrer"}},[t._v("the custom cyphal branch of ardupilot"),e("OutboundLink")],1),t._v(", since PR is not merged.")])]),t._v(" "),e("p",[e("strong",[t._v("1. Port configuration")])]),t._v(" "),e("p",[t._v("The following Ardupilot Cyphal registers should have the same port identifiers as GPS:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Port")]),t._v(" "),e("th",[t._v("Type")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("setpoint")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/tree/master/reg/udral/service/actuator/common/sp",target:"_blank",rel:"noopener noreferrer"}},[t._v("reg.udral.service.actuator.common.sp/*"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("readiness")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/OpenCyphal/public_regulated_data_types/blob/master/reg/udral/service/common/Readiness.0.1.dsdl",target:"_blank",rel:"noopener noreferrer"}},[t._v("reg.udral.service.common.Readiness.0.1"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[e("strong",[t._v("2. Channels configuration")])]),t._v(" "),e("p",[e("strong",[t._v("3. Verification")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://youtu.be/xvcuNHGmXlg?t=11",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:a(423),alt:"Ports and channels configuration"}}),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"_5-5-px4-integration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-px4-integration"}},[t._v("#")]),t._v(" 5.5. PX4 integration")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("At the moment:")]),t._v(" "),e("ol",[e("li",[t._v("PX4 sends setpoint within the range [0; 8192]. So, you either need to configure "),e("code",[t._v("control_mode")]),t._v(" register as 1 or to switch into a custom branch with fixed scaling. The fix was proposed in the PR "),e("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/pull/21475",target:"_blank",rel:"noopener noreferrer"}},[t._v("#21475"),e("OutboundLink")],1),t._v(". This PR also divides ESC.0 topic into 2 for setpoint and readiness.")]),t._v(" "),e("li",[t._v("It is only avaliable on fmu-v5.")]),t._v(" "),e("li",[t._v('Anyway, PX4 Cyphal support is a "work in progress".')])])]),t._v(" "),e("p",[t._v("PX4 sends setpoint and readiness with following values:")]),t._v(" "),e("ul",[e("li",[t._v("setpoint port ID is "),e("code",[t._v("uavcan.pub.esc.0.id")]),t._v(",")]),t._v(" "),e("li",[t._v("readiness port ID is "),e("code",[t._v("uavcan.pub.esc.0.id")]),t._v(" + 1.")])]),t._v(" "),e("p",[t._v("These port identifiers of the autopilot should be the same as those of the node.")]),t._v(" "),e("p",[t._v("It is recommended to verify the setup with Actuator Testing panel.\nBelow you can see a Cyphal VTOL example on a custom PX4 v1.14 firmware:")]),t._v(" "),e("img",{attrs:{src:a(424),alt:"drawing"}}),t._v(" "),e("h2",{attrs:{id:"_5-6-versions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-versions"}},[t._v("#")]),t._v(" 5.6. Versions")]),t._v(" "),e("p",[t._v("Micro and mini v2 releases:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Version")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/releases/tag/v1.5.10",target:"_blank",rel:"noopener noreferrer"}},[t._v("v1.5.10_112f1595"),e("OutboundLink")],1),t._v(" "),e("br"),t._v(" Nov 17, 2023")]),t._v(" "),e("td",[t._v("Improvements: "),e("br"),t._v(" - Improve feedback: it sended last received readiness state instead of the actual one "),e("br"),t._v(" - Use Vector31 instead of Vector4 "),e("br"),t._v(" - Update default name and add HW version "),e("br"),t._v(" - Add IWDG "),e("br"),t._v(" Fixes: "),e("br"),t._v(" - Fix "),e("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/issues/15",target:"_blank",rel:"noopener noreferrer"}},[t._v("PWM2-PWM3 doesn't work issue"),e("OutboundLink")],1),t._v(" "),e("br"),t._v(" - Fix RGB LED  "),e("br"),t._v(" - Minor standard related fixes")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/releases/tag/v1.4",target:"_blank",rel:"noopener noreferrer"}},[t._v("v1.4.0_52df65ce"),e("OutboundLink")],1),t._v(" "),e("br"),t._v(" Jun 19, 2023")]),t._v(" "),e("td",[t._v("- Fix port.List issue "),e("br"),t._v(" - Add diagnostic.Record "),e("br"),t._v(" - Fix default name "),e("br"),t._v(" - Few other fixes")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/releases/tag/v1.2",target:"_blank",rel:"noopener noreferrer"}},[t._v("v1.2_b4e042b"),e("OutboundLink")],1),t._v(" "),e("br"),t._v(" Feb 23, 2023")]),t._v(" "),e("td",[e("br"),t._v(" - Add "),e("code",[t._v("port.List")]),t._v(" "),e("br"),t._v(" - Add hardware version "),e("br"),t._v(" - Extend git hash length to 64 bit "),e("br"),t._v(" - Few other fixes")])]),t._v(" "),e("tr",[e("td",[t._v("v1.1.2_4f393f4 "),e("br"),t._v(" Nov 17, 2022")]),t._v(" "),e("td",[t._v("Add "),e("code",[t._v("control mode")]),t._v(" parameter to be compatible with PX4")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/releases/tag/v1.0.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("v1.0.1_47a71fd"),e("OutboundLink")],1),t._v(" "),e("br"),t._v(" Oct 23, 2022")]),t._v(" "),e("td",[t._v("Initial release")])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);