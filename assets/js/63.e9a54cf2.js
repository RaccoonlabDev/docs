(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{694:function(e,t,a){e.exports=a.p+"assets/img/wifi_board_v2.107e2e41.png"},695:function(e,t,a){e.exports=a.p+"assets/img/scheme_v2.318eafe9.png"},696:function(e,t,a){e.exports=a.p+"assets/img/params.71963b51.png"},697:function(e,t,a){e.exports=a.p+"assets/img/frames_rate_1500.438178ec.png"},698:function(e,t,a){e.exports=a.p+"assets/img/uav_example.f5af7e3d.png"},809:function(e,t,a){"use strict";a.r(t);var r=a(14),o=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"can-wifi-sniffer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#can-wifi-sniffer"}},[e._v("#")]),e._v(" CAN-WiFi Sniffer")]),e._v(" "),t("p",[e._v("WiFi Sniffer is dedicated to wireless sniffering Cyphal/DroneCAN networks. It establishes connection between CAN-network using one of 2 CAN connectors from the one side and specified WiFi network through UDP from the other side.")]),e._v(" "),t("p",[e._v("It might be a safer alternative for "),t("a",{attrs:{href:"https://github.com/RaccoonlabDev/docs/blob/master/docs/guide/programmer_sniffer/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("wire CAN sniffer"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("Below you can see an illustration of the board.")]),e._v(" "),t("p",[t("img",{attrs:{src:a(694),alt:"wifi_board"}})]),e._v(" "),t("h3",{attrs:{id:"_1-dronecan-interface"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-dronecan-interface"}},[e._v("#")]),e._v(" 1. DroneCAN interface")]),e._v(" "),t("p",[e._v("This node doesn't send any specific messages.")]),e._v(" "),t("p",[e._v("Besides required and highly recommended functions such as "),t("code",[e._v("NodeStatus")]),e._v(" and "),t("code",[e._v("GetNodeInfo")]),e._v(" this node also supports the following application-level functions:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("type")]),e._v(" "),t("th",[e._v("message")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://dronecan.github.io/Specification/7._List_of_standard_data_types/#uavcanprotocolparam",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.protocol.param"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("2")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://dronecan.github.io/Specification/7._List_of_standard_data_types/#restartnode",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.protocol.RestartNode"),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[e._v("3")]),e._v(" "),t("td",[e._v("RPC-service")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://dronecan.github.io/Specification/7._List_of_standard_data_types/#gettransportstats",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.protocol.GetTransportStats"),t("OutboundLink")],1)])])])]),e._v(" "),t("h3",{attrs:{id:"_2-hardware-specification"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-hardware-specification"}},[e._v("#")]),e._v(" 2. Hardware specification")]),e._v(" "),t("p",[e._v("The board v2.0 has following scheme:")]),e._v(" "),t("p",[t("img",{attrs:{src:a(695),alt:"scheme_v2"}})]),e._v(" "),t("h3",{attrs:{id:"_3-wire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-wire"}},[e._v("#")]),e._v(" 3. Wire")]),e._v(" "),t("p",[e._v("This board has 4 connectors which are described in the table below.")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("Connector")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("UCANPHY Micro (JST-GH 4)")]),e._v(" "),t("td",[e._v("Devices that deliver power to the bus are required to provide 4.9–5.5 V on the bus power line, 5.0 V nominal. Devices that are powered from the bus should expect 4.0–5.5 V on the bus power line. The current shall not exceed 1 A per connector.")])]),e._v(" "),t("tr",[t("td",[e._v("2")]),e._v(" "),t("td",[e._v("6-pin Molex  ("),t("a",{attrs:{href:"https://www.molex.com/molex/products/part-detail/pcb_receptacles/5025850670",target:"_blank",rel:"noopener noreferrer"}},[e._v("502585-0670"),t("OutboundLink")],1),e._v(", "),t("a",{attrs:{href:"https://www.molex.com/molex/products/part-detail/crimp_housings/5025780600",target:"_blank",rel:"noopener noreferrer"}},[e._v("502578-0600"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("td",[e._v("Contacts support up to 100 V, 2 A per contact. But the board may work only with 2S-6S.")])]),e._v(" "),t("tr",[t("td",[e._v("3")]),e._v(" "),t("td",[e._v("SWD")]),e._v(" "),t("td",[e._v("STM32 firmware updating using "),t("RouterLink",{attrs:{to:"/guide/wifi_bridge/docs/guide/programmer_sniffer/"}},[e._v("programmer-sniffer")]),e._v(".")],1)]),e._v(" "),t("tr",[t("td",[e._v("4")]),e._v(" "),t("td",[e._v("esp8266 connector")]),e._v(" "),t("td",[e._v("Esp8266 firmware updating using usb-uart converter.")])])])]),e._v(" "),t("h3",{attrs:{id:"_4-main-function-description"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-main-function-description"}},[e._v("#")]),e._v(" 4. Main function description")]),e._v(" "),t("p",[e._v("This node is dedicated for remote configuration UAVCAN network nodes or logging data stream.")]),e._v(" "),t("blockquote",[t("p",[e._v("Note: Because of performance limitation this node is not suitable for applications which require fast response such as controlling motors.")])]),e._v(" "),t("h3",{attrs:{id:"_5-auxiliary-functions-description"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-auxiliary-functions-description"}},[e._v("#")]),e._v(" 5. Auxiliary functions description")]),e._v(" "),t("p",[t("strong",[e._v("Software version")])]),e._v(" "),t("p",[e._v("GetNodeInfo response contains software version that allows you to differentiate one firmware from another. See "),t("code",[e._v("Node Properties")]),e._v(" window in "),t("code",[e._v("uavcan gui tool")]),e._v(".")]),e._v(" "),t("p",[t("strong",[e._v("Hardware version")])]),e._v(" "),t("p",[e._v("Not implemented yet.")]),e._v(" "),t("p",[t("strong",[e._v("Hardware unique ID")])]),e._v(" "),t("p",[e._v("GetNodeInfo response contains hardware unique ID that allows you to differentiate one board from another. See "),t("code",[e._v("Node Properties")]),e._v(" window in "),t("code",[e._v("uavcan gui tool")]),e._v(".")]),e._v(" "),t("p",[t("strong",[e._v("Restart")])]),e._v(" "),t("p",[e._v("By sending "),t("a",{attrs:{href:"https://dronecan.github.io/Specification/7._List_of_standard_data_types/#restartnode",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.protocol.RestartNode"),t("OutboundLink")],1),e._v(" request this node might be restarted.")]),e._v(" "),t("p",[t("strong",[e._v("GetTransportStats")])]),e._v(" "),t("p",[e._v("By sending "),t("a",{attrs:{href:"https://dronecan.github.io/Specification/7._List_of_standard_data_types/#gettransportstats",target:"_blank",rel:"noopener noreferrer"}},[e._v("uavcan.protocol.GetTransportStats"),t("OutboundLink")],1),e._v(" request this node will response the message with number of transmitted and received frames.")]),e._v(" "),t("h3",{attrs:{id:"_6-parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-parameters"}},[e._v("#")]),e._v(" 6. Parameters")]),e._v(" "),t("p",[t("img",{attrs:{src:a(696),alt:"params",title:"params"}})]),e._v(" "),t("h3",{attrs:{id:"_7-led-indication"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-led-indication"}},[e._v("#")]),e._v(" 7. Led indication")]),e._v(" "),t("p",[e._v("This board has 2 LEDs. One in dedicated to the STM32 microcontroller, another one is for ESP8266.")]),e._v(" "),t("p",[e._v("Both LEDs allow you to understand possible problems. They blink from 1 to 5 times for 2 seconds, then wait for 2 seconds. By counting the number of blinks you can define the code of current status.")]),e._v(" "),t("p",[e._v("STM32 blinks meaning:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Number of blinks")]),e._v(" "),t("th",[e._v("Uavcan health")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("OK")]),e._v(" "),t("td",[e._v("UART and CAN are receiving and working")])]),e._v(" "),t("tr",[t("td",[e._v("2")]),e._v(" "),t("td",[e._v("WARNING")]),e._v(" "),t("td",[e._v("There is no RX data from uart")])]),e._v(" "),t("tr",[t("td",[e._v("3")]),e._v(" "),t("td",[e._v("WARNING")]),e._v(" "),t("td",[e._v("There is no RX data from CAN")])]),e._v(" "),t("tr",[t("td",[e._v("4")]),e._v(" "),t("td",[e._v("WARNING")]),e._v(" "),t("td",[e._v("There is no RX data at all")])]),e._v(" "),t("tr",[t("td",[e._v("5")]),e._v(" "),t("td",[e._v("CRITICAL")]),e._v(" "),t("td",[e._v("There is a problem with the periphery initialization level. Probably you load the wrong firmware.")])])])]),e._v(" "),t("h3",{attrs:{id:"_8-usage-example-on-a-table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-usage-example-on-a-table"}},[e._v("#")]),e._v(" 8. Usage example on a table")]),e._v(" "),t("p",[e._v("Below you can see an example of bus monitor plot with connected device that was published with frame rate 1500 frames per second.\n"),t("img",{attrs:{src:a(697),alt:"frames_rate_1500.png",title:"frames_rate_1500.png"}})]),e._v(" "),t("h4",{attrs:{id:"_8-1-how-to-debug-it"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-how-to-debug-it"}},[e._v("#")]),e._v(" 8.1. How to debug it")]),e._v(" "),t("p",[e._v("You can see the debug messages by connection to the board via USB port. The debug messages might be obtain by any serial monitor programs. An example for ubuntu based on "),t("code",[e._v("minicom")]),e._v(" utility shown below:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" minicom\n")])])]),t("ol",[t("li",[e._v("By typing "),t("code",[e._v("sudo minicom -s")]),e._v(" and choosing "),t("code",[e._v("Serial port setup")]),e._v(" configure 1000000 baud rate for your serial port, let's say "),t("code",[e._v("ttyUSB0")]),e._v(".")]),e._v(" "),t("li",[e._v("Don't forget to press "),t("code",[e._v("Save setup as dfl")])]),e._v(" "),t("li",[e._v("Press "),t("code",[e._v("Exit")]),e._v(" and it will go into monitor mode")])]),e._v(" "),t("h3",{attrs:{id:"_9-uav-usage-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-uav-usage-example"}},[e._v("#")]),e._v(" 9. UAV usage example")]),e._v(" "),t("p",[e._v("WiFi sniffer has been tested several times with complex VTOL and other application.")]),e._v(" "),t("p",[t("img",{attrs:{src:a(698),alt:"uav_example.png",title:"uav_example.png"}})]),e._v(" "),t("h3",{attrs:{id:"_10-performance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-performance"}},[e._v("#")]),e._v(" 10. Performance")]),e._v(" "),t("p",[e._v("This board has following performance characteristics:")]),e._v(" "),t("ul",[t("li",[e._v("The response time up to 1 ms for each WiFi client.")]),e._v(" "),t("li",[e._v("Maximum bandwidth is 3703 frames per second.")])]),e._v(" "),t("blockquote",[t("p",[e._v("The response time is limited by time required for ESP8266 to send an UDP package.\nThe bandwidth is limited by UART frequency that is 1000000 bit/sec. According to SLCAN each CAN frame is encoded into up to 27 bytes. So, maximum frame rate is 3703 frames per second.")])]),e._v(" "),t("h3",{attrs:{id:"_11-how-to-upload-firmware"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-how-to-upload-firmware"}},[e._v("#")]),e._v(" 11. How to upload firmware")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Upload firmware to STM32 using SWD connector.")])]),e._v(" "),t("li",[t("p",[e._v("Upload firmware to ESP8266 using UART connector.")])])]),e._v(" "),t("p",[e._v("Choose an appropriate parameters before uploading.")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("№")]),e._v(" "),t("th",[e._v("Hardware version")]),e._v(" "),t("th",[e._v("First")]),e._v(" "),t("th",[e._v("Second")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("1")]),e._v(" "),t("td",[e._v("Tools/Crystal Frequency")]),e._v(" "),t("td",[e._v("26 MHz")]),e._v(" "),t("td",[e._v("40 MHz")])])])])])}),[],!1,null,null,null);t.default=o.exports}}]);